<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cool Roomes</title>
</head>
<body>

    <h1>Cools Rooms</h1>


    <div id="rooms-container">

    </div>
    
</body>


<script>
    let roomsContainer = document.getElementById('rooms-container')


    /*
    // ===> inorder for this to work we  need to work on  [CORS]  header
    // ===> (1) by installing the python -m pip install django-cors-headers
    
    // ===> (2) after that install it in your app ['"corsheaders",']
    // ===> (3) we are making an api call to a end point
    // ===> (4) install the middle ['"corsheaders.middleware.CorsMiddleware"']
    */
    

    // ===> (5) finally specify the corsheaders by default it is false [CORS_ALLOW_ALL_ORIGINS = True] allows all urls to acces
    let getRooms = async () => {
        // ===> this request here will get us some data
        let response = await fetch('http://127.0.0.1:8000/api/rooms/')
        // ===> when we send data we have to send data we have to stringify 
        // ===> and parsing it so it can turn into a json data 
        let rooms = await response.json()
        for(let i=0; rooms.length > i; i++) {
            /*
            // ===> rooms[i] accessing the index of that
            */
            let room = rooms[i]
            let row = `<div>
                            <h3>${room.name}</h3>
                        </div>`
            roomsContainer.innerHTML += row;
        }  
    }

    getRooms()


</script>
</html>